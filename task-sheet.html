<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Sheet - Dead Signal</title>
    <script src="https://portals-labs.github.io/portals-sdk/portals-sdk.js?v=38472920"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bungee&display=swap" rel="stylesheet">

    <style>
        @font-face {
            font-family: 'PP Supply Mono';
            src: local('PP Supply Mono Medium'), local('PPSupplyMono-Medium');
            font-weight: 500;
            font-style: normal;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier Prime', 'Courier New', monospace;
            background: transparent;
            min-height: 100vh;
            overflow: hidden;
            position: relative;
            user-select: none;
        }

        /* Click overlay for closing */
        .click-overlay {
            position: fixed;
            inset: 0;
            z-index: 5;
            cursor: pointer;
        }

        /* Main container */
        .task-sheet {
            position: fixed;
            z-index: 10;
            width: 90%;
            min-width: 400px;
            max-width: 720px;
            right: 50%;
            transform: translateX(50%) translateY(120%);
            top: 60px;
            max-height: calc(100vh - 100px);
            background: #10171d;
            border-radius: 26px;
            padding: 30px 50px 40px;
            display: flex;
            flex-direction: column;
            gap: 24px;
            align-items: stretch;
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            overflow-y: auto;
            overflow-x: hidden;
        }

        .task-sheet.visible {
            transform: translateX(50%) translateY(0);
        }

        .task-sheet::-webkit-scrollbar {
            width: 6px;
        }

        .task-sheet::-webkit-scrollbar-track {
            background: transparent;
        }

        .task-sheet::-webkit-scrollbar-thumb {
            background: rgba(114, 127, 134, 0.3);
            border-radius: 3px;
        }

        /* Header section */
        .header {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: flex-end;
            gap: 12px;
            padding: 15px 0;
            width: 100%;
        }

        .logo {
            width: 74px;
            height: 61.781px;
            position: relative;
            flex-shrink: 0;
        }

        .logo img {
            position: absolute;
            width: 150%;
            height: auto;
            left: -25%;
            top: -35%;
        }

        .title-section {
            display: flex;
            flex-direction: column;
            gap: 9.59px;
        }

        .title {
            font-family: 'Bungee', cursive;
            font-size: 36.333px;
            line-height: 0.911;
            letter-spacing: -1.4533px;
            color: #d3e8eb;
        }

        .progress {
            font-family: 'PP Supply Mono', 'Courier New', monospace;
            font-weight: 500;
            font-size: 13px;
            line-height: 14.599px;
            letter-spacing: 2.99px;
            color: #9dfcb3;
        }

        /* Task categories container */
        .task-categories {
            display: flex;
            flex-direction: column;
            gap: 7.334px;
            width: 100%;
            padding-bottom: 40px;
        }

        /* Task section card */
        .task-section {
            border: 1px solid #19232a;
            border-radius: 20.309px;
            padding: 19.18px 29.335px 28.771px;
            display: flex;
            flex-direction: column;
            gap: 16.924px;
        }

        .task-section.completed-section {
            background: rgba(133, 253, 225, 0.02);
            border-color: #38695e;
        }

        /* Section header */
        .section-header {
            display: flex;
            flex-wrap: wrap;
            gap: 16.924px;
            align-items: center;
            justify-content: space-between;
            width: 100%;
        }

        .section-header-left {
            display: flex;
            gap: 16.924px;
            align-items: center;
        }

        .section-icon {
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        /* Icon colors from Figma: #727f86 for inactive, #77cda6 for completed */
        .section-icon img,
        .section-icon svg {
            max-width: 100%;
            max-height: 100%;
            /* Filter to convert to #727f86 */
            filter: brightness(0) saturate(100%) invert(53%) sepia(7%) saturate(531%) hue-rotate(166deg) brightness(89%) contrast(88%);
        }

        .completed-section .section-icon img,
        .completed-section .section-icon svg {
            /* Filter to convert to #77cda6 */
            filter: brightness(0) saturate(100%) invert(76%) sepia(26%) saturate(491%) hue-rotate(103deg) brightness(92%) contrast(87%);
        }

        .section-title {
            font-family: 'Bungee', cursive;
            font-size: 21px;
            line-height: 0.911;
            letter-spacing: 1.68px;
            color: #727f86;
        }

        .section-title.active {
            color: #77cda6;
        }

        .section-status {
            font-family: 'Bungee', cursive;
            font-size: 14px;
            line-height: 0.911;
            letter-spacing: 1.12px;
            color: #9dfcb3;
        }

        /* Task items */
        .task-list {
            display: flex;
            flex-direction: column;
            gap: 12.975px;
        }

        .task-item {
            font-family: 'PP Supply Mono', 'Courier New', monospace;
            font-weight: 600;
            font-size: 14px;
            line-height: 14.599px;
            letter-spacing: 3.22px;
            color: #b5cbce;
            position: relative;
            text-decoration: none;
        }

        .task-item.completed {
            color: #3d5458;
        }

        /* Strikethrough animation */
        .task-item.completed .strike-line {
            position: absolute;
            left: 0;
            top: 50%;
            height: 1px;
            background: #3d5458;
            width: 0;
            transition: width 0.4s ease-out;
        }

        .task-item.completed.animate-strike .strike-line {
            width: 100%;
        }

        /* Hide tasks button */
        .hide-tasks-btn {
            position: fixed;
            bottom: 41px;
            left: 47px;
            z-index: 20;
            background: rgba(255, 255, 255, 0.05);
            border: none;
            border-radius: 27px;
            padding: 15px 21px;
            cursor: pointer;
            transition: background 0.2s ease, transform 0.2s ease;
        }

        .hide-tasks-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.02);
        }

        .hide-tasks-btn:active {
            transform: scale(0.98);
        }

        .hide-tasks-btn span {
            font-family: 'Bungee', cursive;
            font-size: 15.926px;
            line-height: 0.911;
            letter-spacing: 1.2741px;
            color: #727f86;
        }

        /* Responsive */
        @media (max-width: 460px) {
            .task-sheet {
                width: calc(100% - 30px);
                min-width: unset;
                padding: 20px 25px 30px;
            }

            .title {
                font-size: 28px;
            }

            .section-title {
                font-size: 18px;
            }

            .task-item {
                font-size: 12px;
                letter-spacing: 2px;
            }

            .hide-tasks-btn {
                left: 15px;
                bottom: 25px;
            }
        }
    </style>
</head>
<body>
    <!-- Click overlay for closing task sheet -->
    <div class="click-overlay" id="clickOverlay"></div>

    <!-- Main Task Sheet -->
    <div class="task-sheet" id="taskSheet">
        <!-- Header -->
        <div class="header">
            <div class="logo">
                <img src="assets/logo-dead-signal.svg" alt="Dead Signal">
            </div>
            <div class="title-section">
                <h1 class="title">TASK SHEET</h1>
                <p class="progress">45% COMPLETE</p>
            </div>
        </div>

        <!-- Task Categories -->
        <div class="task-categories">
            <!-- MEDBAY - Completed Section -->
            <div class="task-section completed-section">
                <div class="section-header">
                    <div class="section-header-left">
                        <div class="section-icon">
                            <img src="assets/icon-medbay.svg" alt="Medbay">
                        </div>
                        <h2 class="section-title active">MEDBAY</h2>
                    </div>
                    <span class="section-status">COMPLETED</span>
                </div>
                <div class="task-list">
                    <p class="task-item completed">APPROVE MEDICAL I.D<span class="strike-line"></span></p>
                    <p class="task-item completed">POWER UP MEDBAYS<span class="strike-line"></span></p>
                    <p class="task-item completed">DISPENSE MEDICATION<span class="strike-line"></span></p>
                </div>
            </div>

            <!-- BOTANICS -->
            <div class="task-section">
                <div class="section-header">
                    <div class="section-header-left">
                        <div class="section-icon">
                            <img src="assets/icon-botanics.svg" alt="Botanics">
                        </div>
                        <h2 class="section-title">BOTANICS</h2>
                    </div>
                </div>
                <div class="task-list">
                    <p class="task-item completed">SORT SAMPLES<span class="strike-line"></span></p>
                    <p class="task-item">LABEL BOXES</p>
                </div>
            </div>

            <!-- OFFICES -->
            <div class="task-section">
                <div class="section-header">
                    <div class="section-header-left">
                        <div class="section-icon">
                            <img src="assets/icon-offices-2.svg" alt="Offices">
                        </div>
                        <h2 class="section-title">OFFICES</h2>
                    </div>
                </div>
                <div class="task-list">
                    <p class="task-item">SORT SAMPLES</p>
                    <p class="task-item completed">LABEL BOXES<span class="strike-line"></span></p>
                </div>
            </div>

            <!-- STORAGE -->
            <div class="task-section">
                <div class="section-header">
                    <div class="section-header-left">
                        <div class="section-icon">
                            <img src="assets/icon-storage.svg" alt="Storage">
                        </div>
                        <h2 class="section-title">STORAGE</h2>
                    </div>
                </div>
                <div class="task-list">
                    <p class="task-item completed">OPEN BAY DOOR<span class="strike-line"></span></p>
                    <p class="task-item completed">SOMETHING ELSE<span class="strike-line"></span></p>
                    <p class="task-item">DISPENSE MEDICATION</p>
                </div>
            </div>

            <!-- POWER -->
            <div class="task-section">
                <div class="section-header">
                    <div class="section-header-left">
                        <div class="section-icon">
                            <img src="assets/icon-power.svg" alt="Power">
                        </div>
                        <h2 class="section-title">POWER</h2>
                    </div>
                </div>
                <div class="task-list">
                    <p class="task-item completed">REPAIR BROKEN LEVER<span class="strike-line"></span></p>
                    <p class="task-item completed">RESTART GENERATOR<span class="strike-line"></span></p>
                    <p class="task-item completed">SWITCH ON ALL POWER LEVELS<span class="strike-line"></span></p>
                </div>
            </div>

            <!-- VENTS -->
            <div class="task-section">
                <div class="section-header">
                    <div class="section-header-left">
                        <div class="section-icon">
                            <img src="assets/icon-vents.svg" alt="Vents">
                        </div>
                        <h2 class="section-title">VENTS</h2>
                    </div>
                </div>
                <div class="task-list">
                    <p class="task-item completed">REPAIR BROKEN LEVER<span class="strike-line"></span></p>
                    <p class="task-item">RESTART GENERATOR</p>
                    <p class="task-item">SWITCH ON ALL POWER LEVELS</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Hide Tasks Button -->
    <button class="hide-tasks-btn" id="hideTasksBtn">
        <span>HIDE TASKS</span>
    </button>

    <script>
        // State
        let isTaskSheetVisible = false;

        // Elements
        const taskSheet = document.getElementById('taskSheet');
        const hideTasksBtn = document.getElementById('hideTasksBtn');
        const clickOverlay = document.getElementById('clickOverlay');

        // Show task sheet with animations
        function showTaskSheet() {
            isTaskSheetVisible = true;
            taskSheet.classList.add('visible');
            hideTasksBtn.querySelector('span').textContent = 'HIDE TASKS';

            // After slide-in animation completes, trigger strikethrough animations
            setTimeout(() => {
                animateStrikethroughs();
            }, 500);
        }

        // Hide task sheet
        function hideTaskSheet() {
            isTaskSheetVisible = false;
            taskSheet.classList.remove('visible');
            hideTasksBtn.querySelector('span').textContent = 'SHOW TASKS';

            // Reset strikethrough animations for next show
            resetStrikethroughs();
        }

        // Toggle task sheet
        function toggleTaskSheet() {
            if (isTaskSheetVisible) {
                hideTaskSheet();
            } else {
                showTaskSheet();
            }
        }

        // Animate strikethroughs with staggered delay
        function animateStrikethroughs() {
            const completedTasks = document.querySelectorAll('.task-item.completed');
            completedTasks.forEach((task, index) => {
                setTimeout(() => {
                    task.classList.add('animate-strike');
                }, index * 80); // 80ms stagger between each
            });
        }

        // Reset strikethrough animations
        function resetStrikethroughs() {
            const completedTasks = document.querySelectorAll('.task-item.completed');
            completedTasks.forEach(task => {
                task.classList.remove('animate-strike');
            });
        }

        // Event listeners
        hideTasksBtn.addEventListener('click', toggleTaskSheet);

        // Click outside to close
        clickOverlay.addEventListener('click', (e) => {
            if (isTaskSheetVisible) {
                hideTaskSheet();
            }
        });

        // Prevent clicks inside task sheet from closing it
        taskSheet.addEventListener('click', (e) => {
            e.stopPropagation();
        });

        // Initialize - show task sheet on load with slight delay
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Task Sheet loaded');

            // Show task sheet after a brief delay
            setTimeout(() => {
                showTaskSheet();
            }, 300);

            // Portals SDK integration
            window.addEventListener('message', function(event) {
                if (event.data && event.data.type === 'updateTasks') {
                    console.log('Received task update:', event.data);
                }
            });
        });
    </script>
</body>
</html>
