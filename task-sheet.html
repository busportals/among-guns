<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Sheet - Dead Signal</title>
    <script src="https://portals-labs.github.io/portals-sdk/portals-sdk.js?v=38472920"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bungee&display=swap" rel="stylesheet">

    <style>
        @font-face {
            font-family: 'PP Supply Mono';
            src: local('PP Supply Mono Medium'), local('PPSupplyMono-Medium');
            font-weight: 500;
            font-style: normal;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier Prime', 'Courier New', monospace;
            background: transparent;
            min-height: 100vh;
            overflow: hidden;
            position: relative;
            user-select: none;
        }

        /* Click overlay for closing */
        .click-overlay {
            position: fixed;
            inset: 0;
            z-index: 5;
            cursor: pointer;
        }

        /* Main container */
        .task-sheet {
            position: fixed;
            z-index: 10;
            width: 90%;
            min-width: 400px;
            max-width: 720px;
            right: 50%;
            transform: translateX(50%) translateY(120%);
            top: 60px;
            max-height: calc(100vh - 100px);
            background: #10171d;
            border-radius: 26px;
            padding: 30px 50px 40px;
            display: flex;
            flex-direction: column;
            gap: 24px;
            align-items: stretch;
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            overflow-y: auto;
            overflow-x: hidden;
        }

        .task-sheet.visible {
            transform: translateX(50%) translateY(0);
        }

        .task-sheet::-webkit-scrollbar {
            width: 6px;
        }

        .task-sheet::-webkit-scrollbar-track {
            background: transparent;
        }

        .task-sheet::-webkit-scrollbar-thumb {
            background: rgba(114, 127, 134, 0.3);
            border-radius: 3px;
        }

        /* Header section */
        .header {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: flex-end;
            gap: 12px;
            padding: 15px 0;
            width: 100%;
        }

        .logo {
            width: 74px;
            height: 61.781px;
            position: relative;
            flex-shrink: 0;
        }

        .logo img {
            position: absolute;
            width: 150%;
            height: auto;
            left: -25%;
            top: -35%;
        }

        .title-section {
            display: flex;
            flex-direction: column;
            gap: 9.59px;
        }

        .title {
            font-family: 'Bungee', cursive;
            font-size: 36.333px;
            line-height: 0.911;
            letter-spacing: -1.4533px;
            color: #d3e8eb;
        }

        .progress {
            font-family: 'PP Supply Mono', 'Courier New', monospace;
            font-weight: 500;
            font-size: 13px;
            line-height: 14.599px;
            letter-spacing: 2.99px;
            color: #9dfcb3;
        }

        /* Task categories container */
        .task-categories {
            display: flex;
            flex-direction: column;
            gap: 7.334px;
            width: 100%;
            padding-bottom: 40px;
        }

        /* Task section card */
        .task-section {
            border: 1px solid #19232a;
            border-radius: 20.309px;
            padding: 19.18px 29.335px 28.771px;
            display: flex;
            flex-direction: column;
            gap: 16.924px;
        }

        .task-section.completed-section {
            background: rgba(133, 253, 225, 0.02);
            border-color: #38695e;
        }

        /* Section header */
        .section-header {
            display: flex;
            flex-wrap: wrap;
            gap: 16.924px;
            align-items: center;
            justify-content: space-between;
            width: 100%;
        }

        .section-header-left {
            display: flex;
            gap: 16.924px;
            align-items: center;
        }

        .section-icon {
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .section-icon img,
        .section-icon svg {
            max-width: 100%;
            max-height: 100%;
        }

        /* Completed section icons use #77cda6 teal color */
        .completed-section .section-icon svg path {
            fill: #77cda6;
        }

        .section-title {
            font-family: 'Bungee', cursive;
            font-size: 21px;
            line-height: 0.911;
            letter-spacing: 1.68px;
            color: #727f86;
        }

        .section-title.active {
            color: #77cda6;
        }

        .section-status {
            font-family: 'Bungee', cursive;
            font-size: 14px;
            line-height: 0.911;
            letter-spacing: 1.12px;
            color: #9dfcb3;
        }

        /* Task items */
        .task-list {
            display: flex;
            flex-direction: column;
            gap: 12.975px;
        }

        .task-item {
            font-family: 'PP Supply Mono', 'Courier New', monospace;
            font-weight: 600;
            font-size: 14px;
            line-height: 14.599px;
            letter-spacing: 3.22px;
            color: #b5cbce;
            position: relative;
            text-decoration: none;
        }

        .task-item.completed {
            color: #3d5458;
        }

        /* Strikethrough animation */
        .task-item.completed .strike-line {
            position: absolute;
            left: 0;
            top: 50%;
            height: 1px;
            background: #3d5458;
            width: 0;
            transition: width 0.4s ease-out;
        }

        .task-item.completed.animate-strike .strike-line {
            width: 100%;
        }

        /* Hide tasks button */
        .hide-tasks-btn {
            position: fixed;
            bottom: 41px;
            left: 47px;
            z-index: 20;
            background: rgba(255, 255, 255, 0.05);
            border: none;
            border-radius: 27px;
            padding: 15px 21px;
            cursor: pointer;
            transition: background 0.2s ease, transform 0.2s ease;
        }

        .hide-tasks-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.02);
        }

        .hide-tasks-btn:active {
            transform: scale(0.98);
        }

        .hide-tasks-btn span {
            font-family: 'Bungee', cursive;
            font-size: 15.926px;
            line-height: 0.911;
            letter-spacing: 1.2741px;
            color: #727f86;
        }

        /* Responsive */
        @media (max-width: 460px) {
            .task-sheet {
                width: calc(100% - 30px);
                min-width: unset;
                padding: 20px 25px 30px;
            }

            .title {
                font-size: 28px;
            }

            .section-title {
                font-size: 18px;
            }

            .task-item {
                font-size: 12px;
                letter-spacing: 2px;
            }

            .hide-tasks-btn {
                left: 15px;
                bottom: 25px;
            }
        }
    </style>
</head>
<body>
    <!-- Click overlay for closing task sheet -->
    <div class="click-overlay" id="clickOverlay"></div>

    <!-- Main Task Sheet -->
    <div class="task-sheet" id="taskSheet">
        <!-- Header -->
        <div class="header">
            <div class="logo">
                <svg width="74" height="62" viewBox="0 0 74 62" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M55.5195 33.1466C54.8234 34.4997 54.2728 36.0931 52.8394 36.9084C52.237 37.2851 50.84 37.9111 51.4222 36.5411C52.3861 34.474 54.1694 32.577 54.6455 30.3949C54.9247 29.2434 54.9262 28.055 55.007 26.8764C55.1051 25.2457 55.4931 23.5317 55.3399 21.8405C55.1395 18.8573 54.0002 15.5306 51.9238 13.4921C50.7748 12.4058 49.2047 11.5056 47.8244 10.4406C47.222 9.98642 46.5863 9.50503 45.8822 9.24614C44.6561 8.77457 43.2341 8.81997 41.9765 8.4573C40.6317 8.04909 39.3644 7.34843 37.9484 7.12729C33.1608 6.37605 28.0363 8.31885 24.4754 11.519C22.8095 13.2921 21.85 15.5358 20.5586 17.5631C18.3686 21.8175 19.762 27.0681 21.3499 31.3282C21.9004 32.6455 22.8717 33.6959 23.8825 34.6732C25.5108 36.2668 26.9166 37.988 29.0612 38.8925C34.9101 41.6061 42.0346 40.8109 47.2198 37.0286C48.1045 36.3617 49.6864 34.9058 49.9565 34.9019C50.1364 34.9027 50.0141 35.1068 49.9708 35.2452C48.9147 37.4327 46.685 38.7741 44.7384 40.062C44.0647 40.5452 43.4122 41.0901 42.6791 41.4791C41.4757 42.1269 40.004 42.416 38.7826 43.1131C35.3318 45.3982 33.4835 43.3886 30.4831 41.5916C29.4182 41.0995 27.9513 40.4775 26.9166 40.9793C26.3568 41.3132 26.3438 42.0275 25.7574 42.1383C24.6472 42.2327 23.4972 41.4937 22.7058 40.7764C21.954 39.9808 21.6354 39.0452 20.5958 37.8848C18.9335 36.1079 17.5464 34.9065 16.7421 32.4913C14.0564 27.2889 12.6182 27.1873 14.8492 20.921C15.6565 18.9653 15.7656 16.9021 15.4845 14.8457C15.4289 11.4482 18.3232 9.36123 21.4286 8.41495C25.5732 6.64486 22.631 6.5384 23.6059 5.53448C24.4851 4.71113 26.0758 4.02121 27.3841 3.37474C29.1515 2.57459 30.7923 1.71647 32.7024 1.36806C38.7895 0.621246 46.0653 2.87678 50.2407 7.40835C50.7723 7.95901 51.1559 8.5612 51.7378 9.02424C52.4171 9.52839 53.4539 9.8224 54.0649 10.5491C54.7447 11.295 55.0394 12.2947 55.6037 13.1343C56.2628 14.1409 57.2629 15.46 57.7463 16.9796C58.8622 20.1136 57.7466 23.2895 57.3945 26.4006C57.25 27.9732 57.9921 29.4278 57.4604 30.6246C57.0392 31.5611 56.0974 32.1793 55.5747 33.0593L55.5301 33.1372L55.5195 33.1466Z" fill="#7A8C97"/>
                    <path d="M25.5955 29.0257C28.0048 31.8128 30.6891 34.6511 34.5567 34.7753C39.1923 34.5463 44.5972 31.4256 44.9542 26.3005C45.059 24.3152 44.0761 22.3188 43.4495 20.5655C42.9531 19.2441 42.1256 18.0704 40.91 17.3466C37.2358 14.8185 31.1893 17.0035 30.1271 21.3566C29.2922 24.6881 31.6835 28.6672 35.2413 28.748C38.1996 28.9802 40.8976 26.1551 39.7727 23.2726C39.5004 22.5266 38.9604 21.8484 38.267 21.3679C36.9625 20.4169 35.032 20.3008 34.9327 20.004C34.9616 19.5227 36.7692 19.168 38.2217 19.6053C40.7855 20.3905 42.4236 23.5849 41.827 26.2011C40.7453 30.8784 34.5973 32.722 30.7335 30.0988C28.16 28.5834 27.0054 25.5463 26.4955 22.7452C26.2028 21.5248 25.9236 20.3249 25.9054 19.0864C25.9068 16.0597 28.9362 14.3785 31.094 12.6646C32.506 11.665 34.2416 11.3701 35.9274 11.2546C38.3894 10.9738 40.6057 11.1268 42.2722 13.0362C43.0839 13.9033 44.1357 14.2673 45.2577 14.2756C47.8887 14.3501 48.5563 17.4515 49.4717 19.4341C54.0928 30.3995 39.5782 41.1949 29.9771 35.2097C26.9329 33.4047 24.452 30.4308 23.5497 26.9308C23.3977 26.2117 23.4529 25.9439 23.6898 26.2244C24.3353 27.0963 24.7874 28.0996 25.5319 28.9479L25.5955 29.0257Z" fill="#7A8C97"/>
                    <path d="M48.3979 38.9632C49.9306 38.159 49.472 39.8839 48.7775 40.5471C48.5215 40.8137 48.1728 41.0445 47.8242 41.1898C47.0898 41.5182 46.3006 41.0125 46.8226 40.2281C47.1413 39.7487 47.8988 39.2857 48.3305 39.0044L48.4029 38.9635L48.3979 38.9632Z" fill="#7A8C97"/>
                    <path d="M33.853 25.623C34.3865 25.8501 35.0473 25.9038 35.5721 25.6522C36.515 25.2122 36.6213 23.7563 35.5187 23.43C34.8079 23.1969 33.5956 23.5279 33.4504 22.5211C33.3808 22.2012 33.5001 21.8509 33.4625 21.5423C33.403 21.288 32.8106 22.0416 32.6482 22.7978C32.3658 23.8392 32.7396 25.0872 33.7621 25.5804L33.853 25.623Z" fill="#7A8C97"/>
                    <path d="M10.6042 50.226H1.13783C0.782017 50.226 0.519841 50.1511 0.3513 50.0012C0.201485 49.8327 0.126578 49.5705 0.126578 49.2147V31.0122C0.126578 30.6564 0.201485 30.4036 0.3513 30.2538C0.519841 30.0852 0.782017 30.001 1.13783 30.001H10.6042C12.9451 30.001 14.6773 30.4691 15.8009 31.4055C16.9433 32.3418 17.5144 33.7838 17.5144 35.7314V44.4955C17.5144 46.4431 16.9433 47.8851 15.8009 48.8214C14.6773 49.7578 12.9451 50.226 10.6042 50.226ZM6.50307 35.3662V44.9169H9.84581C10.2952 44.9169 10.623 44.8045 10.829 44.5798C11.0537 44.3551 11.166 44.0086 11.166 43.5405V36.7145C11.166 36.2464 11.0537 35.9093 10.829 35.7033C10.623 35.4786 10.2952 35.3662 9.84581 35.3662H6.50307Z" fill="#E2EDF2"/>
                    <path d="M34.0061 50.226H20.9722C20.6164 50.226 20.3542 50.1511 20.1857 50.0012C20.0358 49.8327 19.9609 49.5705 19.9609 49.2147V31.0122C19.9609 30.6564 20.0358 30.4036 20.1857 30.2538C20.3542 30.0852 20.6164 30.001 20.9722 30.001H34.0061C34.3619 30.001 34.6147 30.0852 34.7645 30.2538C34.933 30.4036 35.0173 30.6564 35.0173 31.0122V34.2988C35.0173 34.6546 34.933 34.9168 34.7645 35.0853C34.6147 35.2351 34.3619 35.31 34.0061 35.31H26.2531V37.473H31.7307C32.0866 37.473 32.3394 37.5573 32.4892 37.7258C32.6577 37.8756 32.742 38.1284 32.742 38.4842V41.4899C32.742 41.8457 32.6577 42.1079 32.4892 42.2764C32.3394 42.4262 32.0866 42.5011 31.7307 42.5011H26.2531V44.9169H34.0061C34.3619 44.9169 34.6147 45.0012 34.7645 45.1697C34.933 45.3195 35.0173 45.5723 35.0173 45.9281V49.2147C35.0173 49.5705 34.933 49.8327 34.7645 50.0012C34.6147 50.1511 34.3619 50.226 34.0061 50.226Z" fill="#E2EDF2"/>
                    <path d="M44.5482 35.8999L43.228 40.1696H47.6382L46.3179 35.8999C46.243 35.7314 46.1587 35.6097 46.0651 35.5348C45.9902 35.4598 45.8966 35.4224 45.7842 35.4224H45.082C44.9696 35.4224 44.8666 35.4598 44.773 35.5348C44.6981 35.6097 44.6231 35.7314 44.5482 35.8999ZM42.9471 49.2147C42.9471 49.5705 42.8628 49.8327 42.6943 50.0012C42.5445 50.1511 42.2917 50.226 41.9358 50.226H37.8066C37.4508 50.226 37.1886 50.1511 37.0201 50.0012C36.8702 49.8327 36.7953 49.5705 36.7953 49.2147V41.7989C36.7953 41.2371 36.8796 40.591 37.0481 39.8607C37.2354 39.1303 37.5163 38.2782 37.8909 37.3044L40.3347 30.928C40.4471 30.6096 40.6156 30.3755 40.8403 30.2257C41.0838 30.0759 41.3928 30.001 41.7673 30.001H49.3236C49.6794 30.001 49.9697 30.0759 50.1944 30.2257C50.4378 30.3755 50.6157 30.6096 50.7281 30.928L53.1719 37.3044C53.5465 38.2782 53.818 39.1303 53.9866 39.8607C54.1738 40.591 54.2675 41.2371 54.2675 41.7989V49.2147C54.2675 49.5705 54.1832 49.8327 54.0147 50.0012C53.8648 50.1511 53.612 50.226 53.2562 50.226H49.0146C48.6401 50.226 48.3592 50.1511 48.1719 50.0012C48.0033 49.8327 47.9191 49.5705 47.9191 49.2147V45.2821H42.9471V49.2147Z" fill="#E2EDF2"/>
                    <path d="M67.0898 50.226H57.6234C57.2676 50.226 57.0054 50.1511 56.8369 50.0012C56.687 49.8327 56.6121 49.5705 56.6121 49.2147V31.0122C56.6121 30.6564 56.687 30.4036 56.8369 30.2538C57.0054 30.0852 57.2676 30.001 57.6234 30.001H67.0898C69.4307 30.001 71.1629 30.4691 72.2865 31.4055C73.4288 32.3418 74 33.7838 74 35.7314V44.4955C74 46.4431 73.4288 47.8851 72.2865 48.8214C71.1629 49.7578 69.4307 50.226 67.0898 50.226ZM62.9886 35.3662V44.9169H66.3314C66.7808 44.9169 67.1085 44.8045 67.3145 44.5798C67.5392 44.3551 67.6516 44.0086 67.6516 43.5405V36.7145C67.6516 36.2464 67.5392 35.9093 67.3145 35.7033C67.1085 35.4786 66.7808 35.3662 66.3314 35.3662H62.9886Z" fill="#E2EDF2"/>
                    <path d="M4.4576 61.7808H0.455891C0.295485 61.7808 0.177291 61.747 0.101309 61.6795C0.0337697 61.6035 0 61.4853 0 61.3249V59.8433C0 59.6828 0.0337697 59.5689 0.101309 59.5013C0.177291 59.4254 0.295485 59.3874 0.455891 59.3874H3.86241C3.97216 59.3874 4.05236 59.3536 4.10302 59.2861C4.16212 59.2101 4.19166 59.1214 4.19166 59.0201C4.19166 58.8766 4.16212 58.7711 4.10302 58.7035C4.05236 58.636 3.97216 58.598 3.86241 58.5896L1.96286 58.3236C1.37189 58.2392 0.894897 58.045 0.531873 57.7411C0.177291 57.4372 0 56.9306 0 56.2215V54.8918C0 54.1742 0.232167 53.6254 0.6965 53.2455C1.16083 52.8571 1.80246 52.663 2.62137 52.663H6.16719C6.3276 52.663 6.44157 52.701 6.50911 52.7769C6.58509 52.8445 6.62308 52.9585 6.62308 53.1189V54.6258C6.62308 54.7862 6.58509 54.9044 6.50911 54.9804C6.44157 55.048 6.3276 55.0817 6.16719 55.0817H3.21656C3.10681 55.0817 3.02239 55.1197 2.96329 55.1957C2.90419 55.2632 2.87465 55.3519 2.87465 55.4616C2.87465 55.5714 2.90419 55.6643 2.96329 55.7402C3.02239 55.8162 3.10681 55.8584 3.21656 55.8669L5.10345 56.1201C5.69442 56.2046 6.17141 56.3987 6.53444 56.7027C6.89746 57.0066 7.07897 57.5131 7.07897 58.2223V59.552C7.07897 60.2696 6.84259 60.8226 6.36981 61.2109C5.90548 61.5908 5.26807 61.7808 4.4576 61.7808Z" fill="#E2EDF2"/>
                    <path d="M13.0232 61.7808C12.8628 61.7808 12.7446 61.747 12.6686 61.6795C12.601 61.6035 12.5673 61.4853 12.5673 61.3249V59.8179C12.5673 59.6575 12.601 59.5435 12.6686 59.476C12.7446 59.4 12.8628 59.362 13.0232 59.362H14.2769V55.1071H13.0232C12.8628 55.1071 12.7446 55.0733 12.6686 55.0057C12.601 54.9298 12.5673 54.8116 12.5673 54.6512V53.1189C12.5673 52.9585 12.601 52.8445 12.6686 52.7769C12.7446 52.701 12.8628 52.663 13.0232 52.663H18.4179C18.5783 52.663 18.6923 52.701 18.7598 52.7769C18.8358 52.8445 18.8738 52.9585 18.8738 53.1189V54.6512C18.8738 54.8116 18.8358 54.9298 18.7598 55.0057C18.6923 55.0733 18.5783 55.1071 18.4179 55.1071H17.1895V59.362H18.4179C18.5783 59.362 18.6923 59.4 18.7598 59.476C18.8358 59.5435 18.8738 59.6575 18.8738 59.8179V61.3249C18.8738 61.4853 18.8358 61.6035 18.7598 61.6795C18.6923 61.747 18.5783 61.7808 18.4179 61.7808H13.0232Z" fill="#E2EDF2"/>
                    <path d="M31.708 61.7808H27.7189C26.6636 61.7808 25.8785 61.5697 25.3635 61.1476C24.8569 60.7255 24.6037 60.0754 24.6037 59.1974V55.2464C24.6037 54.3683 24.8569 53.7183 25.3635 53.2962C25.8785 52.874 26.6636 52.663 27.7189 52.663H30.8848C31.0452 52.663 31.1592 52.701 31.2268 52.7769C31.3027 52.8445 31.3407 52.9585 31.3407 53.1189V54.6512C31.3407 54.8116 31.3027 54.9298 31.2268 55.0057C31.1592 55.0733 31.0452 55.1071 30.8848 55.1071H28.2508C27.9891 55.1071 27.7949 55.1619 27.6683 55.2717C27.5416 55.373 27.4783 55.5292 27.4783 55.7402V58.7668C27.4783 58.9779 27.5247 59.1341 27.6176 59.2354C27.7189 59.3367 27.8667 59.3874 28.0608 59.3874H29.2892V57.4118C29.2892 57.2514 29.323 57.1375 29.3905 57.0699C29.4665 56.9939 29.5847 56.9559 29.7451 56.9559H31.708C31.8684 56.9559 31.9823 56.9939 32.0499 57.0699C32.1259 57.1375 32.1639 57.2514 32.1639 57.4118V61.3249C32.1639 61.4853 32.1259 61.6035 32.0499 61.6795C31.9823 61.747 31.8684 61.7808 31.708 61.7808Z" fill="#E2EDF2"/>
                    <path d="M40.37 61.7808H38.4704C38.31 61.7808 38.1919 61.747 38.1159 61.6795C38.0483 61.6035 38.0146 61.4853 38.0146 61.3249V53.1189C38.0146 52.9585 38.0483 52.8445 38.1159 52.7769C38.1919 52.701 38.31 52.663 38.4704 52.663H39.7875C39.9479 52.663 40.083 52.6883 40.1927 52.739C40.3109 52.7896 40.4249 52.8783 40.5346 53.0049L42.9914 55.8162V53.1189C42.9914 52.9585 43.0251 52.8445 43.0927 52.7769C43.1687 52.701 43.2869 52.663 43.4473 52.663H45.3468C45.5072 52.663 45.6212 52.701 45.6887 52.7769C45.7647 52.8445 45.8027 52.9585 45.8027 53.1189V61.3249C45.8027 61.4853 45.7647 61.6035 45.6887 61.6795C45.6212 61.747 45.5072 61.7808 45.3468 61.7808H43.4473C43.2869 61.7808 43.1687 61.747 43.0927 61.6795C43.0251 61.6035 42.9914 61.4853 42.9914 61.3249V59.7673L40.8259 57.1459V61.3249C40.8259 61.4853 40.7879 61.6035 40.7119 61.6795C40.6444 61.747 40.5304 61.7808 40.37 61.7808Z" fill="#E2EDF2"/>
                    <path d="M55.1602 55.3223L54.565 57.2472H56.5532L55.958 55.3223C55.9243 55.2464 55.8863 55.1915 55.8441 55.1577C55.8103 55.1239 55.7681 55.1071 55.7174 55.1071H55.4008C55.3502 55.1071 55.3038 55.1239 55.2615 55.1577C55.2278 55.1915 55.194 55.2464 55.1602 55.3223ZM54.4384 61.3249C54.4384 61.4853 54.4004 61.6035 54.3244 61.6795C54.2569 61.747 54.1429 61.7808 53.9825 61.7808H52.121C51.9606 61.7808 51.8424 61.747 51.7664 61.6795C51.6988 61.6035 51.6651 61.4853 51.6651 61.3249V57.9817C51.6651 57.7284 51.7031 57.4372 51.779 57.1079C51.8635 56.7787 51.9901 56.3945 52.159 55.9555L53.2607 53.0809C53.3113 52.9374 53.3873 52.8318 53.4886 52.7643C53.5984 52.6967 53.7377 52.663 53.9065 52.663H57.3131C57.4735 52.663 57.6043 52.6967 57.7056 52.7643C57.8154 52.8318 57.8956 52.9374 57.9462 53.0809L59.048 55.9555C59.2168 56.3945 59.3392 56.7787 59.4152 57.1079C59.4996 57.4372 59.5419 57.7284 59.5419 57.9817V61.3249C59.5419 61.4853 59.5039 61.6035 59.4279 61.6795C59.3603 61.747 59.2464 61.7808 59.086 61.7808H57.1738C57.0049 61.7808 56.8783 61.747 56.7938 61.6795C56.7179 61.6035 56.6799 61.4853 56.6799 61.3249V59.552H54.4384V61.3249Z" fill="#E2EDF2"/>
                    <path d="M72.3127 61.7808H65.8669C65.7065 61.7808 65.5883 61.747 65.5124 61.6795C65.4448 61.6035 65.4111 61.4853 65.4111 61.3249V53.1189C65.4111 52.9585 65.4448 52.8445 65.5124 52.7769C65.5883 52.701 65.7065 52.663 65.8669 52.663H67.8298C67.9902 52.663 68.1042 52.701 68.1717 52.7769C68.2477 52.8445 68.2857 52.9585 68.2857 53.1189V59.3874H70.0206V57.3359C70.0206 57.1754 70.0544 57.0615 70.1219 56.9939C70.1979 56.918 70.3161 56.88 70.4765 56.88H72.3127C72.4731 56.88 72.5871 56.918 72.6547 56.9939C72.7306 57.0615 72.7686 57.1754 72.7686 57.3359V61.3249C72.7686 61.4853 72.7306 61.6035 72.6547 61.6795C72.5871 61.747 72.4731 61.7808 72.3127 61.7808Z" fill="#E2EDF2"/>
                </svg>
            </div>
            <div class="title-section">
                <h1 class="title">TASK SHEET</h1>
                <p class="progress">45% COMPLETE</p>
            </div>
        </div>

        <!-- Task Categories -->
        <div class="task-categories">
            <!-- MEDBAY - Completed Section -->
            <div class="task-section completed-section">
                <div class="section-header">
                    <div class="section-header-left">
                        <div class="section-icon">
                            <img src="assets/icon-medbay.svg" alt="Medbay">
                        </div>
                        <h2 class="section-title active">MEDBAY</h2>
                    </div>
                    <span class="section-status">COMPLETED</span>
                </div>
                <div class="task-list">
                    <p class="task-item completed">APPROVE MEDICAL I.D<span class="strike-line"></span></p>
                    <p class="task-item completed">POWER UP MEDBAYS<span class="strike-line"></span></p>
                    <p class="task-item completed">DISPENSE MEDICATION<span class="strike-line"></span></p>
                </div>
            </div>

            <!-- BOTANICS -->
            <div class="task-section">
                <div class="section-header">
                    <div class="section-header-left">
                        <div class="section-icon">
                            <img src="assets/icon-botanics.svg" alt="Botanics">
                        </div>
                        <h2 class="section-title">BOTANICS</h2>
                    </div>
                </div>
                <div class="task-list">
                    <p class="task-item completed">SORT SAMPLES<span class="strike-line"></span></p>
                    <p class="task-item">LABEL BOXES</p>
                </div>
            </div>

            <!-- OFFICES -->
            <div class="task-section">
                <div class="section-header">
                    <div class="section-header-left">
                        <div class="section-icon">
                            <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M21.0362 23.8993H9.43452C8.46032 23.8993 7.67106 24.6885 7.67106 25.6627C7.67106 26.6369 8.46032 27.4262 9.43452 27.4262H21.0362C22.0104 27.4262 22.7997 26.6369 22.7997 25.6627C22.7997 24.6885 22.0104 23.8993 21.0362 23.8993Z" fill="#727F86"/>
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M23.3574 2.57397C25.5841 2.57397 26.6983 2.57422 27.5488 3.00757C28.2967 3.38877 28.905 3.99691 29.2861 4.74487C29.7194 5.59534 29.7197 6.70876 29.7197 8.9353V16.4539C29.7197 18.6803 29.7195 19.7938 29.2861 20.6443C28.905 21.3922 28.2967 22.0004 27.5488 22.3816C26.6983 22.8149 25.5841 22.8152 23.3574 22.8152H7.52637C5.29974 22.8152 4.18641 22.8149 3.33594 22.3816C2.58792 22.0005 1.97983 21.3923 1.59863 20.6443C1.16531 19.7938 1.16504 18.6803 1.16504 16.4539V8.9353C1.16504 6.70867 1.16529 5.59535 1.59863 4.74487C1.9798 3.99683 2.58789 3.38874 3.33594 3.00757C4.18641 2.57423 5.29973 2.57397 7.52637 2.57397H23.3574ZM8.10449 5.46558C6.68809 5.46558 5.9796 5.46545 5.43848 5.74097C4.9624 5.98354 4.5746 6.37134 4.33203 6.84741C4.05652 7.38854 4.05664 8.09703 4.05664 9.51343V15.5134C4.05664 16.9303 4.05635 17.6392 4.33203 18.1804C4.5746 18.6565 4.9624 19.0433 5.43848 19.2859C5.97963 19.5615 6.68788 19.5623 8.10449 19.5623H22.7793C24.1963 19.5623 24.9051 19.5617 25.4463 19.2859C25.9223 19.0433 26.3092 18.6564 26.5518 18.1804C26.8275 17.6392 26.8281 16.9304 26.8281 15.5134V9.51343C26.8281 8.09685 26.8274 7.38856 26.5518 6.84741C26.3092 6.37134 25.9224 5.98354 25.4463 5.74097C24.9051 5.46524 24.1962 5.46558 22.7793 5.46558H8.10449Z" fill="#727F86"/>
                            </svg>
                        </div>
                        <h2 class="section-title">OFFICES</h2>
                    </div>
                </div>
                <div class="task-list">
                    <p class="task-item">SORT SAMPLES</p>
                    <p class="task-item completed">LABEL BOXES<span class="strike-line"></span></p>
                </div>
            </div>

            <!-- STORAGE -->
            <div class="task-section">
                <div class="section-header">
                    <div class="section-header-left">
                        <div class="section-icon">
                            <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M27.2739 6.96293L14.967 1.24438L10.2459 3.35964L22.5542 9.07683L27.2739 6.96293Z" fill="#727F86"/>
                                <path d="M20.1406 10.1577L7.83511 4.44048L2.12981 6.99468L14.4381 12.7119C15.8597 12.0753 18.727 10.7916 20.142 10.1577H20.1406Z" fill="#727F86"/>
                                <path d="M15.4285 14.4573V28.5612L28.6809 22.624V8.52016L15.4285 14.4573Z" fill="#727F86"/>
                                <path d="M0.722656 22.6332L13.4315 28.5375V14.4482L0.722656 8.54398V22.6332Z" fill="#727F86"/>
                            </svg>
                        </div>
                        <h2 class="section-title">STORAGE</h2>
                    </div>
                </div>
                <div class="task-list">
                    <p class="task-item completed">OPEN BAY DOOR<span class="strike-line"></span></p>
                    <p class="task-item completed">SOMETHING ELSE<span class="strike-line"></span></p>
                    <p class="task-item">DISPENSE MEDICATION</p>
                </div>
            </div>

            <!-- POWER -->
            <div class="task-section">
                <div class="section-header">
                    <div class="section-header-left">
                        <div class="section-icon">
                            <img src="assets/icon-power.svg" alt="Power">
                        </div>
                        <h2 class="section-title">POWER</h2>
                    </div>
                </div>
                <div class="task-list">
                    <p class="task-item completed">REPAIR BROKEN LEVER<span class="strike-line"></span></p>
                    <p class="task-item completed">RESTART GENERATOR<span class="strike-line"></span></p>
                    <p class="task-item completed">SWITCH ON ALL POWER LEVELS<span class="strike-line"></span></p>
                </div>
            </div>

            <!-- VENTS -->
            <div class="task-section">
                <div class="section-header">
                    <div class="section-header-left">
                        <div class="section-icon">
                            <img src="assets/icon-vents.svg" alt="Vents">
                        </div>
                        <h2 class="section-title">VENTS</h2>
                    </div>
                </div>
                <div class="task-list">
                    <p class="task-item completed">REPAIR BROKEN LEVER<span class="strike-line"></span></p>
                    <p class="task-item">RESTART GENERATOR</p>
                    <p class="task-item">SWITCH ON ALL POWER LEVELS</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Hide Tasks Button -->
    <button class="hide-tasks-btn" id="hideTasksBtn">
        <span>HIDE TASKS</span>
    </button>

    <script>
        // State
        let isTaskSheetVisible = false;

        // Elements
        const taskSheet = document.getElementById('taskSheet');
        const hideTasksBtn = document.getElementById('hideTasksBtn');
        const clickOverlay = document.getElementById('clickOverlay');

        // Show task sheet with animations
        function showTaskSheet() {
            isTaskSheetVisible = true;
            taskSheet.classList.add('visible');
            hideTasksBtn.querySelector('span').textContent = 'HIDE TASKS';

            // After slide-in animation completes, trigger strikethrough animations
            setTimeout(() => {
                animateStrikethroughs();
            }, 500);
        }

        // Hide task sheet with animation
        function hideTaskSheet(closeIframe = false) {
            isTaskSheetVisible = false;
            taskSheet.classList.remove('visible');
            hideTasksBtn.querySelector('span').textContent = 'SHOW TASKS';

            // Reset strikethrough animations for next show
            resetStrikethroughs();

            // If closing iframe, wait for animation to complete then close via Portals SDK
            if (closeIframe) {
                setTimeout(() => {
                    closePortalsIframe();
                }, 500); // Match the CSS transition duration
            }
        }

        // Close iframe using Portals SDK
        function closePortalsIframe() {
            try {
                // Try different Portals SDK methods for closing
                if (window.Portals && typeof window.Portals.closeIframe === 'function') {
                    window.Portals.closeIframe();
                } else if (window.Portals && typeof window.Portals.close === 'function') {
                    window.Portals.close();
                } else if (window.parent && window.parent !== window) {
                    // Fallback: post message to parent to close
                    window.parent.postMessage({ type: 'closeTaskSheet' }, '*');
                }
                console.log('Closing task sheet iframe');
            } catch (error) {
                console.error('Error closing iframe:', error);
            }
        }

        // Toggle task sheet
        function toggleTaskSheet() {
            if (isTaskSheetVisible) {
                hideTaskSheet(false); // Don't close iframe on toggle
            } else {
                showTaskSheet();
            }
        }

        // Animate strikethroughs with staggered delay
        function animateStrikethroughs() {
            const completedTasks = document.querySelectorAll('.task-item.completed');
            completedTasks.forEach((task, index) => {
                setTimeout(() => {
                    task.classList.add('animate-strike');
                }, index * 80); // 80ms stagger between each
            });
        }

        // Reset strikethrough animations
        function resetStrikethroughs() {
            const completedTasks = document.querySelectorAll('.task-item.completed');
            completedTasks.forEach(task => {
                task.classList.remove('animate-strike');
            });
        }

        // Event listeners
        hideTasksBtn.addEventListener('click', toggleTaskSheet);

        // Click outside to close and close iframe
        clickOverlay.addEventListener('click', (e) => {
            if (isTaskSheetVisible) {
                hideTaskSheet(true); // Close iframe after animation
            }
        });

        // Prevent clicks inside task sheet from closing it
        taskSheet.addEventListener('click', (e) => {
            e.stopPropagation();
        });

        // Initialize - show task sheet on load with slight delay
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Task Sheet loaded');

            // Show task sheet after a brief delay
            setTimeout(() => {
                showTaskSheet();
            }, 300);

            // Portals SDK integration
            window.addEventListener('message', function(event) {
                if (event.data && event.data.type === 'updateTasks') {
                    console.log('Received task update:', event.data);
                }
            });
        });
    </script>
</body>
</html>
