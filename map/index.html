<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dead Signal Map</title>
    <script src="https://portals-labs.github.io/portals-sdk/portals-sdk.js?v=10005456"></script>
    <style>
      html, body, #root {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        background-color: transparent !important;
        background: transparent !important;
      }
      /* Force all child elements to have transparent backgrounds unless they explicitly need color */
      #root > * {
        background-color: transparent !important;
      }
    </style>
    <script type="module" crossorigin src="/among-guns/map/assets/index-DnFOBFND.js"></script>
    <link rel="stylesheet" crossorigin href="/among-guns/map/assets/index-D2LpBZhN.css">
  </head>

  <body>
    <div id="root"></div>
    <script>
      // Wire up close button to Portals SDK and force transparent backgrounds
      document.addEventListener('DOMContentLoaded', function() {
        // Wait for React to render, then find and wire up the close button
        setTimeout(function() {
          // Force transparent backgrounds on all elements
          const allElements = document.querySelectorAll('*');
          allElements.forEach(function(el) {
            const computedStyle = window.getComputedStyle(el);
            const bgColor = computedStyle.backgroundColor;

            // If element has the dark background color, make it transparent
            if (bgColor === 'rgb(15, 21, 25)' || bgColor === 'rgba(15, 21, 25, 1)') {
              el.style.backgroundColor = 'transparent';
              console.log('Made element transparent:', el);
            }
          });

          // Look for the X button - try common selectors
          const closeButton = document.querySelector('[class*="close"]') ||
                             document.querySelector('[class*="Close"]') ||
                             document.querySelector('button[aria-label*="close"]') ||
                             document.querySelector('button[aria-label*="Close"]') ||
                             document.querySelector('svg[class*="close"]')?.parentElement ||
                             document.querySelector('svg[class*="Close"]')?.parentElement;

          if (closeButton) {
            console.log('Found close button, attaching Portals SDK close handler');
            closeButton.addEventListener('click', function(e) {
              console.log('Close button clicked');
              if (typeof PortalsSdk !== 'undefined') {
                PortalsSdk.closeIframe();
                console.log('Closing iframe via PortalsSdk.closeIframe()');
              } else {
                console.warn('PortalsSdk not available');
              }
            });
          } else {
            console.warn('Could not find close button');
          }
        }, 500);
      });
    </script>
  </body>
</html>
